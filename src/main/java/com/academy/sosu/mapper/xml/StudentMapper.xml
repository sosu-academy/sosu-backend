<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.academy.sosu.mapper.StudentRepository">
    <insert id="insertStudent"
            parameterType="com.academy.sosu.model.dto.student.StudentDTO"
            keyProperty="studentNo">
        <selectKey keyProperty="studentNo" order="BEFORE" resultType="int">
            SELECT IFNULL(MAX(STUDENT_NO), 0) + 1 AS studentNo FROM STUDENT;
        </selectKey>
        INSERT INTO STUDENT
        (
        STUDENT_NO
        , STUDENT_NAME
        , SCHOOL
        , BIRTH_YEAR
        , PARENT_PHONE_NO1
        , PARENT_PHONE_NO2
        , STUDENT_PHONE_NO
        , GRADUATE_YN
        , STUDENT_NOW_YN
        )
        VALUES
        (
        #{studentNo}
        , #{studentName}
        , #{school}
        , #{birthYear}
        , #{parentPhoneNo1}
        , #{parentPhoneNo2}
        , #{studentPhoneNo}
        , 'N'
        , 'Y'
        );
    </insert>

    <select id="selectOneStudentByNo"
            parameterType="com.academy.sosu.model.dto.student.StudentNoDTO"
            resultType="com.academy.sosu.model.dto.student.StudentDTO">

    </select>

    <select id="selectStudentCount">

    </select>

    <select id="searchStudentList"
            parameterType="com.academy.sosu.model.dto.common.SearchRepoDTO"
            resultType="com.academy.sosu.model.dto.student.StudentDTO">

    </select>

    <update id="updateStudent"
            parameterType="com.academy.sosu.model.dto.student.StudentDTO">

    </update>

    <delete id="deleteStudent"
            parameterType="com.academy.sosu.model.dto.student.StudentNoDTO">

    </delete>
</mapper>